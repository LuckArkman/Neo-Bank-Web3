<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Bank.MobileUI.Views.Auth.LoginPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#F5F7FA">

    <Grid>
        
        <!-- Background com Gradiente -->
        <BoxView VerticalOptions="Fill">
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#8E44AD" Offset="0.1" />
                    <GradientStop Color="#3498DB" Offset="1.0" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>

        <!-- Container Principal -->
        <ScrollView VerticalOptions="Fill">
            <VerticalStackLayout Spacing="0">
                
                <!-- Logo e Header -->
                <VerticalStackLayout Padding="40,80,40,60" Spacing="20">
                    
                    <!-- Logo -->
                    <Frame BackgroundColor="White" 
                           CornerRadius="35" 
                           WidthRequest="100" 
                           HeightRequest="100"
                           HorizontalOptions="Center"
                           HasShadow="True"
                           Padding="20">
                        <Image Source="app_logo.png" 
                               Aspect="AspectFit"/>
                    </Frame>

                    <Label Text="Bem-vindo de volta!" 
                           TextColor="White" 
                           FontSize="28" 
                           FontAttributes="Bold"
                           HorizontalTextAlignment="Center"/>
                    
                    <Label Text="Entre com sua conta para continuar" 
                           TextColor="#DCDDE1" 
                           FontSize="15"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>

                <!-- Form Container -->
                <Frame CornerRadius="40,40,0,0" 
                       BackgroundColor="White" 
                       Padding="30,40"
                       HasShadow="False">
                    
                    <VerticalStackLayout Spacing="25">
                        
                        <!-- Email Input -->
                        <VerticalStackLayout Spacing="10">
                            <Label Text="Email" 
                                   TextColor="#2C3E50" 
                                   FontSize="15"
                                   FontAttributes="Bold"/>
                            
                            <Frame CornerRadius="20" 
                                   Padding="15"
                                   HasShadow="True"
                                   BackgroundColor="White"
                                   BorderColor="#E8EAED">
                                <Entry Placeholder="seu@email.com" 
                                       Text="{Binding Email}"
                                       Keyboard="Email"
                                       TextColor="#2C3E50"
                                       PlaceholderColor="#BDC3C7"
                                       BackgroundColor="Transparent"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Password Input -->
                        <VerticalStackLayout Spacing="10">
                            <Grid ColumnDefinitions="*, Auto">
                                <Label Grid.Column="0"
                                       Text="Senha" 
                                       TextColor="#2C3E50" 
                                       FontSize="15"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"/>
                                
                                <Label Grid.Column="1"
                                       Text="Esqueceu?" 
                                       TextColor="#8E44AD" 
                                       FontSize="13"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}"/>
                                    </Label.GestureRecognizers>
                                </Label>
                            </Grid>
                            
                            <Frame CornerRadius="20" 
                                   Padding="15"
                                   HasShadow="True"
                                   BackgroundColor="White"
                                   BorderColor="#E8EAED">
                                <Grid ColumnDefinitions="*, Auto">
                                    <Entry Grid.Column="0"
                                           Placeholder="••••••••" 
                                           Text="{Binding Password}"
                                           IsPassword="{Binding IsPasswordHidden}"
                                           TextColor="#2C3E50"
                                           PlaceholderColor="#BDC3C7"
                                           BackgroundColor="Transparent"/>
                                    
                                    <ImageButton Grid.Column="1"
                                               Source="eye_icon.png"
                                               WidthRequest="24"
                                               HeightRequest="24"
                                               BackgroundColor="Transparent"
                                               Command="{Binding TogglePasswordVisibilityCommand}"/>
                                </Grid>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Biometrics Toggle -->
                        <Frame BackgroundColor="#F8F9FB" 
                               CornerRadius="15" 
                               Padding="15"
                               HasShadow="False">
                            <Grid ColumnDefinitions="Auto, *, Auto">
                                <Image Grid.Column="0"
                                       Source="fingerprint_icon.png" 
                                       WidthRequest="28"
                                       HeightRequest="28"
                                       VerticalOptions="Center"/>
                                
                                <Label Grid.Column="1"
                                       Text="Usar biometria" 
                                       TextColor="#2C3E50" 
                                       FontSize="14"
                                       VerticalOptions="Center"
                                       Margin="12,0,0,0"/>
                                
                                <Switch Grid.Column="2"
                                        IsToggled="{Binding UseBiometrics}"
                                        OnColor="#8E44AD"
                                        VerticalOptions="Center"/>
                            </Grid>
                        </Frame>

                        <!-- Login Button -->
                        <Button Text="Entrar" 
                                Command="{Binding LoginCommand}"
                                CornerRadius="25"
                                HeightRequest="56"
                                FontSize="16"
                                FontAttributes="Bold"
                                TextColor="White"
                                Margin="0,15,0,0">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#8E44AD" Offset="0.0" />
                                    <GradientStop Color="#3498DB" Offset="1.0" />
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>

                        <!-- Divider -->
                        <Grid ColumnDefinitions="*, Auto, *" 
                              Margin="0,20,0,10">
                            <BoxView Grid.Column="0" 
                                     HeightRequest="1" 
                                     Color="#E8EAED"
                                     VerticalOptions="Center"/>
                            <Label Grid.Column="1" 
                                   Text="ou continue com" 
                                   TextColor="#7F8C8D"
                                   FontSize="13"
                                   Margin="15,0"/>
                            <BoxView Grid.Column="2" 
                                     HeightRequest="1" 
                                     Color="#E8EAED"
                                     VerticalOptions="Center"/>
                        </Grid>

                        <!-- Social Login -->
                        <Grid ColumnDefinitions="*, *, *" 
                              ColumnSpacing="15">
                            
                            <!-- Google -->
                            <Frame Grid.Column="0" 
                                   CornerRadius="20"
                                   Padding="15"
                                   HasShadow="True"
                                   BackgroundColor="White"
                                   BorderColor="#E8EAED">
                                <Image Source="google_icon.png" 
                                       WidthRequest="28"
                                       HeightRequest="28"
                                       HorizontalOptions="Center"/>
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding GoogleLoginCommand}"/>
                                </Frame.GestureRecognizers>
                            </Frame>

                            <!-- Apple -->
                            <Frame Grid.Column="1" 
                                   CornerRadius="20"
                                   Padding="15"
                                   HasShadow="True"
                                   BackgroundColor="White"
                                   BorderColor="#E8EAED">
                                <Image Source="apple_icon.png" 
                                       WidthRequest="28"
                                       HeightRequest="28"
                                       HorizontalOptions="Center"/>
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding AppleLoginCommand}"/>
                                </Frame.GestureRecognizers>
                            </Frame>

                            <!-- MetaMask -->
                            <Frame Grid.Column="2" 
                                   CornerRadius="20"
                                   Padding="15"
                                   HasShadow="True"
                                   BackgroundColor="White"
                                   BorderColor="#E8EAED">
                                <Image Source="metamask_icon.png" 
                                       WidthRequest="28"
                                       HeightRequest="28"
                                       HorizontalOptions="Center"/>
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding MetaMaskLoginCommand}"/>
                                </Frame.GestureRecognizers>
                            </Frame>
                        </Grid>

                        <!-- Sign Up Link -->
                        <HorizontalStackLayout HorizontalOptions="Center" 
                                             Spacing="5"
                                             Margin="0,25,0,0">
                            <Label Text="Não tem uma conta?" 
                                   TextColor="#7F8C8D" 
                                   FontSize="14"/>
                            <Label Text="Cadastre-se" 
                                   TextColor="#8E44AD" 
                                   FontSize="14"
                                   FontAttributes="Bold">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding GoToSignUpCommand}"/>
                                </Label.GestureRecognizers>
                            </Label>
                        </HorizontalStackLayout>

                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>